{
    "description": "TileJSON.io",
    "public": true,
    "files": {
        "index.html": {
            "content": "<!DOCTYPE html>\n<html>\n<head>\n    <title>TileJSON</title>\n    <!--Import Google Icon Font-->\n    <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\n    <!-- Compiled and minified CSS -->\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css\">\n    <link rel=\"stylesheet\" href=\"https://openlayers.org/en/v4.3.3/css/ol.css\" type=\"text/css\">\n    <!-- The line below is only needed for old environments like Internet Explorer and Android 4.x -->\n    <script src=\"https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL\"></script>\n    <script src=\"https://openlayers.org/en/v4.3.3/build/ol.js\"></script>\n    <script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js\"></script>\n    <script type=\"text/javascript\" src=\"https://code.jquery.com/jquery-3.2.1.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js\"></script>\n    <!--Let browser know website is optimized for mobile-->\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n</head>\n<body>\n    <style>\n        html, body, #container {\n            margin: 0;\n            padding: 0;\n            height: 100%;\n            width: 100%;\n            max-height: 100%;\n            max-width: 100%;\n            overflow: hidden;\n        }\n\n        #map, #diffMap {\n            position: absolute;\n            top: 0px;\n            left: 0px;\n            height: 100%;\n            width: 100%;\n        }\n\n        #overDiffMap {\n            position: absolute;\n            top: 132px;\n            left: -16px;\n            right: -16px;\n            width: calc(100% + 32px);\n            max-height: calc(100% - 116px);\n            z-index: 1000;\n        }\n\n        #card {\n            position: absolute;\n            top: 32px;\n            right: 32px;\n            width: 320px;\n        }\n\n        .ol-zoom {\n            left: .5em;\n            top: calc(60px + .5em);\n        }\n\n        #header {\n            position: absolute;\n            top: 0;\n            left: 0;\n            z-index: 100;\n            margin-top: 0;\n            margin-bottom: 0;\n            padding-top: 12px;\n            padding-bottom: 12px;\n            padding-left: 12px;\n            padding-right: 12px;\n            background-color: #ec6f75;\n            color: #fff;\n        }\n\n        #layer-toolbar {\n            position: absolute;\n            top: 0;\n            right: 0;\n            margin-top: 0;\n            margin-bottom: 0;\n            padding-top: 12px;\n            padding-left: 12px;\n            padding-right: 12px;\n            background-color: #e8e8e8;\n            z-index: 2000;\n            width: 360px;\n        }\n\n        .btn-flat {\n            color: #fff !important;\n        }\n\n        #swipe {\n            -webkit-appearance: none;\n            appearance: none;\n            width: 100%;\n            height: 0px;\n            opacity: 0.7;\n            border: none;\n        }\n\n        #swipe:hover {\n            opacity: 1;\n        }\n\n        #swipe::-webkit-slider-runnable-track {\n            height: 28px;\n            background-color: transparent;\n            border: none;\n        }\n\n        #swipe::-webkit-slider-thumb {\n            background: #ee6e73;\n            height: 32px;\n            width: 32px;\n        }\n\n        .row {\n            margin-bottom: 0px !important;\n        }\n\n        .thumb {\n            display: none;\n        }\n    </style>\n    <div id=\"container\">\n        <div id=\"header\" class=\"card darken-1\" hidden>\n            <a id=\"tilejson-link\" class=\"waves-effect waves-teal btn-flat\" href=\"https://tilejson.io\" target=\"_blank\">TileJSON.io</a>\n            <a id=\"diff-btn\" class=\"waves-effect waves-teal btn-flat\">Diff</a>\n            <a id=\"exit-diff-btn\" class=\"waves-effect waves-teal btn-flat\">Exit Diff</a>\n            <a id=\"gist-link\" class=\"waves-effect waves-teal btn-flat\" href=\"https://tilejson.io\" target=\"_blank\">GitHub Gist</a>\n        </div>\n        <div class=\"card darken-1\" id=\"layer-toolbar\" hidden>\n            <div class=\"row\">\n                <div class=\"input-field col s6\">\n                    <select id=\"leftLayerSelect\">\n                        <option value=\"\" disabled selected>Choose a layer</option>\n                    </select>\n                    <label>Left Layer</label>\n                </div>\n                <div class=\"input-field col s6\">\n                    <select id=\"rightLayerSelect\">\n                        <option value=\"\" disabled selected>Choose a layer</option>\n                    </select>\n                    <label>Right Layer</label>\n                </div>\n            </div>\n        </div>\n        <div  id=\"map\" class=\"map\"></div>\n        <div  id=\"diffMap\" class=\"diffMap\"></div>\n        <div  id=\"overDiffMap\" hidden>\n            <input type=\"range\" id=\"swipe\" min=\"0\" max=\"100\" />\n        </div>\n        <div id=\"card\" class=\"card darken-1\" hidden>\n            <a class=\"btn-floating halfway-fab waves-effect waves-light red\" id=\"card-show\" hidden><i class=\"material-icons\">expand_more</i></a>\n            <a class=\"btn-floating halfway-fab waves-effect waves-light red\" id=\"card-hide\"><i class=\"material-icons\">expand_less</i></a>\n            <div id=\"card-content\" class=\"card-content\">\n                <span class=\"card-title\" id=\"map-title\">Shared Map</span>\n                <p><span id=\"map-description\"></p></p>\n            </div>\n        </div>\n    </div>\n    <script>\n        $( document ).ready(function() {\n            $('select').material_select();\n            $('#exit-diff-btn').hide();\n            var urlPath = window.location.pathname.split('/');\n            $('#gist-link').attr('href', 'https://gist.github.com/anonymous/' + urlPath[urlPath.length - 2])\n            $.getJSON('info.json', function(data) { \n                var map = new ol.Map({\n                    target: 'map',\n                    view: new ol.View({\n                        center: data.center,\n                        zoom: data.zoom\n                    })\n                });\n                var diffMap = new ol.Map({\n                    target: 'diffMap',\n                    view: map.getView()\n                });\n                $('#diffMap').hide();\n                if (data.title || data.description) {\n                    $('#card').show();\n                    if (data.title) {\n                        $('#map-title').text(data.title);\n                    } else {\n                        $('#map-title').hide();\n                    }\n                    if (data.description) {\n                        $('#map-description').text(data.description);\n                    }\n                }\n                var baseLayer = new ol.layer.Tile({\n                    source: new ol.source.TileJSON({\n                        tileJSON: data.baseLayer,\n                    })\n                });\n                diffMap.addLayer(baseLayer);\n                if (data.shareBase) {\n                    map.addLayer(baseLayer);\n                }\n\n                $.getJSON('tile.json', function(tileData) {\n                    if (data.shareGist || data.shareTileJSONLink || tileData.length >= 2) {\n                        $('#header').show();\n                        if (!data.shareGist) {\n                            $('#gist-link').hide();\n                        }\n                        if (!data.shareTileJSONLink) {\n                            $('#tilejson-link').hide();\n                        }\n                    }\n                    if (tileData.length < 2) {\n                        $('#diff-btn').hide();\n                        if (!data.shareGist && !data.shareTileJSONLink) {\n                            $('#header').hide();\n                        }\n                    }\n                    \n                    tileData.forEach(function (tileJson) {\n                        var layer = new ol.layer.Tile({\n                            source: new ol.source.TileJSON({\n                                tileJSON: tileJson,\n                            })\n                        });\n                        map.addLayer(layer);\n                        layer.setVisible(tileJson.visible);\n                        layer.setOpacity(tileJson.opacity);\n                    });\n\n                    function initDiffMapAndSelects(left, right) {\n                        const diffMapLayers = diffMap.getLayers().getArray();\n                        var leftLayer, rightLayer;\n\n                        if (diffMapLayers.length === 1) {\n                            leftLayer = new ol.layer.Tile({\n                                source: new ol.source.TileJSON({\n                                    tileJSON: tileData[left],\n                                })\n                            });\n                            diffMap.addLayer(leftLayer);\n                            rightLayer = new ol.layer.Tile({\n                                source: new ol.source.TileJSON({\n                                    tileJSON: tileData[right],\n                                })\n                            });\n                            diffMap.addLayer(rightLayer);\n\n                            setListeners();\n                        } else {\n                            leftLayer = diffMapLayers[1];\n                            leftLayer.setSource(new ol.source.TileJSON({\n                                tileJSON: tileData[left],\n                            }));\n                            rightLayer = diffMapLayers[2];\n                            rightLayer.setSource(new ol.source.TileJSON({\n                                tileJSON: tileData[right],\n                            }));\n                        }\n\n                        $('#leftLayerSelect').find('option').remove();\n                        tileData.forEach(function (tilejson, i) {\n                            if (i !== parseInt(right)) {\n                                $('#leftLayerSelect').append($('<option>', { \n                                    value: i,\n                                    text : tilejson.name,\n                                    selected: i === parseInt(left)\n                                }));\n                            }\n                        });\n                        $('#rightLayerSelect').find('option').remove();\n                        tileData.forEach(function (tilejson, i) {\n                            if (i !== parseInt(left)) {\n                                $('#rightLayerSelect').append($('<option>', { \n                                    value: i,\n                                    text : tilejson.name,\n                                    selected: i === parseInt(right)\n                                }));\n                            }\n                        });\n                        $('select').material_select();\n                    }\n\n                    function setListeners() {\n                        const diffMapLayers = diffMap.getLayers().getArray();\n\n                        var swipe = document.getElementById('swipe');\n\n                        diffMapLayers[1].on('precompose', function(event) {\n                            var ctx = event.context;\n                            var width = ctx.canvas.width * swipe.value / 100;\n\n                            ctx.save();\n                            ctx.beginPath();\n                            ctx.rect(0, 0, width, ctx.canvas.height);\n                            ctx.clip();\n                        });\n\n                        diffMapLayers[1].on('postcompose', function(event) {\n                            var ctx = event.context;\n                            ctx.restore();\n                        });\n\n                        diffMapLayers[2].on('precompose', function(event) {\n                            var ctx = event.context;\n                            var width = ctx.canvas.width * swipe.value / 100;\n\n                            ctx.save();\n                            ctx.beginPath();\n                            ctx.rect(width, 0, ctx.canvas.width - width, ctx.canvas.height);\n                            ctx.clip();\n                        });\n\n                        diffMapLayers[2].on('postcompose', function(event) {\n                            var ctx = event.context;\n                            const width = ctx.canvas.width * swipe.value / 100;\n\n                            ctx.restore();\n\n                            ctx.save();\n                            ctx.fillStyle = '#ffffff';\n                            ctx.beginPath();\n                            ctx.fillRect(width - 6, 0, 12, ctx.canvas.height);\n                            ctx.restore();\n                        });\n\n                        swipe.addEventListener('input', function() {\n                            diffMap.render();\n                        }, false);\n                    }\n\n                    $('#diff-btn').click(function() {\n                        if (tileData.length < 2) {\n                            return;\n                        }\n                        $('#diff-btn').hide();\n                        $('#exit-diff-btn').show();\n                        $('#card').hide();\n                        $('#overDiffMap').show();\n                        $('#map').hide();\n                        $('#diffMap').show();\n                        $('#layer-toolbar').show();\n\n                        var left = data.diffLayerLeftId === -1 ? 0 : data.diffLayerLeftId;\n                        var right = data.diffLayerRightId === -1 ? 1 : data.diffLayerRightId;\n\n                        initDiffMapAndSelects(left, right);\n                    });\n\n                    $('#exit-diff-btn').click(function() {\n                        $('#diff-btn').show();\n                        $('#exit-diff-btn').hide();\n                        $('#card').show();\n                        $('#overDiffMap').hide();\n                        $('#map').show();\n                        $('#diffMap').hide();\n                        $('#layer-toolbar').hide();\n                    });\n\n                    $('#leftLayerSelect').on('change', function() {\n                        initDiffMapAndSelects(this.value, $('#rightLayerSelect').val());\n                    });\n\n                    $('#rightLayerSelect').on('change', function() {\n                        initDiffMapAndSelects($('#leftLayerSelect').val(), this.value);\n                    });\n                });\n            });\n            $('#card-hide').click(function() {\n                $('#card-content').hide();\n                $('#card-hide').hide();\n                $('#card-show').show();\n            });\n            $('#card-show').click(function() {\n                $('#card-content').show();\n                $('#card-hide').show();\n                $('#card-show').hide();\n            });\n        });\n    </script>\n</body>\n</html>"
        },
        "tile.json": {
            "content": ""
        },
        "info.json": {
            "content": ""
        }
    }
}